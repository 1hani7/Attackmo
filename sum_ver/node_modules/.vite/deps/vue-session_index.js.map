{
  "version": 3,
  "sources": ["../../vue-session/index.js"],
  "sourcesContent": ["var STORAGE = null;\r\nvar VueSession = {\r\n    key: 'vue-session-key',\r\n    flash_key: 'vue-session-flash-key',\r\n    setAll: function(all){\r\n        STORAGE.setItem(VueSession.key,JSON.stringify(all));\r\n    }\r\n}\r\n\r\nVueSession.install = function(Vue, options) {\r\n    if(options && 'persist' in options && options.persist) STORAGE = window.localStorage;\r\n    else STORAGE = window.sessionStorage;\r\n    // Vue.prototype.$session = {\r\n    Vue.config.globalProperties.$session = {\r\n        flash: {\r\n            parent: function(){\r\n                return Vue.prototype.$session;\r\n            },\r\n            get: function(key){\r\n                var all = this.parent().getAll();\r\n                var all_flash = all[VueSession.flash_key] || {};\r\n\r\n                var flash_value = all_flash[key];\r\n\r\n                this.remove(key);\r\n\r\n                return flash_value;\r\n            },\r\n            set: function(key, value){\r\n                var all = this.parent().getAll();\r\n                var all_flash = all[VueSession.flash_key] || {};\r\n\r\n                all_flash[key] = value;\r\n                all[VueSession.flash_key] = all_flash;\r\n\r\n                VueSession.setAll(all);\r\n            },\r\n            remove: function(key){\r\n                var all = this.parent().getAll();\r\n                var all_flash = all[VueSession.flash_key] || {};\r\n\r\n                delete all_flash[key];\r\n\r\n                all[VueSession.flash_key] = all_flash;\r\n                VueSession.setAll(all);\r\n            }\r\n        },\r\n        getAll: function(){\r\n            var all = JSON.parse(STORAGE.getItem(VueSession.key));\r\n            return all || {};\r\n        },\r\n        set: function(key,value){\r\n            if(key == 'session-id') return false;\r\n            var all = this.getAll();\r\n\r\n            if(!('session-id' in all)){\r\n                this.start();\r\n                all = this.getAll();\r\n            }\r\n\r\n            all[key] = value;\r\n\r\n            VueSession.setAll(all);\r\n        },\r\n        get: function(key){\r\n            var all = this.getAll();\r\n            return all[key];\r\n        },\r\n        start: function(){\r\n            var all = this.getAll();\r\n            all['session-id'] = 'sess:'+Date.now();\r\n\r\n            VueSession.setAll(all);\r\n        },\r\n        renew: function(sessionId){\r\n            var all = this.getAll();\r\n            all['session-id'] = 'sess:' + sessionId;\r\n            VueSession.setAll(all);\r\n        },\r\n        exists: function(){\r\n            var all = this.getAll();\r\n            return 'session-id' in all;\r\n        },\r\n        has: function(key){\r\n            var all = this.getAll();\r\n            return key in all;\r\n        },\r\n        remove: function(key){\r\n            var all = this.getAll();\r\n            delete all[key];\r\n\r\n            VueSession.setAll(all);\r\n        },\r\n        clear: function(){\r\n            var all = this.getAll();\r\n\r\n            VueSession.setAll({'session-id': all['session-id']});\r\n        },\r\n        destroy: function(){\r\n            VueSession.setAll({});\r\n        },\r\n        id: function(){\r\n            return this.get('session-id');\r\n        }\r\n    }\r\n};\r\n\r\nmodule.exports = VueSession;\r\n"],
  "mappings": "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",
  "names": []
}
